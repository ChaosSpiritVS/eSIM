<!doctype html>
<html lang="zh-Hans">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>分类 · 帮助中心</title>
    <link rel="stylesheet" href="styles.css">
    <script src="data.js"></script>
    <script src="help.js"></script>
  </head>
  <body>
    <div class="screen">
      <div class="nav" id="nav"><h1>分类</h1></div>
      <div class="content" id="content"></div>
    </div>
    <script>
      const lang = detectLang();
      document.documentElement.lang = lang==='zh' ? 'zh-Hans' : 'en';
      const url = new URL(window.location.href);
      const catId = url.searchParams.get('cat') || 'about';
      const cat = HelpData.categories.find(c=>c.id===catId) || HelpData.categories[0];
      renderHeader(document.getElementById('nav'), t(cat, lang), lang, `index.html?lang=${lang}${isIOSHost()? '&ios=1':''}`);
      const bl = document.getElementById('backLabel'); if (bl) bl.textContent = lang==='zh' ? '查看所有类别' : 'See all categories';
      const content = document.getElementById('content');
      renderLangToggle(content, lang);
      renderSearch(content, lang);
      const card = document.createElement('div'); card.className='card';
      const ul = document.createElement('ul'); ul.className='list';
      HelpData.articles.filter(a=>a.cat===cat.id).forEach(a=>{
        const li = document.createElement('li');
        const left = document.createElement('span'); left.textContent=t(a, lang);
        const right = document.createElement('span'); right.textContent='›';
        li.appendChild(left); li.appendChild(right);
        li.addEventListener('click', () =>{ window.location.href = `article.html?id=${encodeURIComponent(a.id)}&lang=${lang}${isIOSHost()? '&ios=1':''}`; });
        ul.appendChild(li);
      });
      card.appendChild(ul);
      content.appendChild(card);
    </script>
  </body>
</html>
